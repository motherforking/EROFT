<!DOCTYPE html>
<!--
	_____________________________________________________________________________________________________
	|																									|
	|	by josef dunlap																					|
	|	mindar by hiukim yuen ||https://github.com/hiukim/mind-ar-js||									|
	|		some code from mindar docs ||https://hiukim.github.io/mind-ar-js-doc/||						|
	|	tarot interpretations from Darius Kazemi's corpora on github									|
	|		https://github.com/dariusk/corpora/blob/master/data/divination/tarot_interpretations.json	|
	|___________________________________________________________________________________________________|
-->
<html>
	<head>
		<title>tarot reader</title>
		<link href="styles.css" rel="stylesheet">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script type="text/javascript" src="data.json"></script>
		<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  </head>
		<script>
			window.onload = init;
  			function init(){
				const sceneEl = document.querySelector('a-scene');
			 	const arSystem = sceneEl.systems["mindar-image-system"];

				const interpretations=[["Nurturing yourself and others", 
                    "Bearing fruit", "Celebrating your body", "Bearing (literal or figurative) children", "Reveling in luxury", "Overindulging", "Being greedy", "Smothering someone with attention", "Debilitating someone by being overprotective", "Inhibiting productivity by obsessing on productivity"], 
					["Wanting something better", "Blazing your own trail", "Realizing there must be more to life", "Leaving an unhealthy situation behind", "Starting your own business", "Being implacable", "Finding fault", "Nitpicking", "Refusing to settle down", "Running away from problems or confrontations"],
					["Measuring progress toward your goal", "Looking at results with an eye toward improving performance", "Asking, \"How happy am I\"", "Coming up with ideas for improving your health or prosperity", "Deciding it's time for a change"]];
    
				const theEmpress = document.getElementById("theEmpress");
				theEmpress.addEventListener("targetFound", event => {
				update("theEmpress");
				});
				theEmpress.addEventListener("targetLost", event => {
				update("");
				});

				const sevenCups = document.getElementById("sevenOfCups");
				sevenCups.addEventListener("targetFound", event => {
				update("sevenCups");
				});
				sevenCups.addEventListener("targetLost", event => {
				update("");
				});

				const sixPentacles = document.getElementById("sixOfPentacles");
				sixPentacles.addEventListener("targetFound", event => {
				update("sixPentacles");
				});
				sixPentacles.addEventListener("targetLost", event => {
				update("");
				});

				const back = document.getElementById("back");
				sevenCups.addEventListener("targetFound", event => {
				update("back");
				});
				sevenCups.addEventListener("targetLost", event => {
				update("");
				});

				const caption = document.getElementById("caption");

				function update(card){
					var rand = Math.floor(Math.random() * 10)+1;
					switch(card){
						case "theEmpress":
							caption.innerHTML = interpretations[0,rand];
							break;
						case "sevenCups":
							caption.innerHTML = interpretations[1,rand];
						break;
						case "sixPentacles":
							caption.innerHTML = interpretations[2,rand];
							break;
						case "back":
							break;
						default:
						caption.innerHTML = "show card to reader and interpretation will appear here";
					}
				}

			}


		</script>
  </head>
	</head>
	<body>
		<img src="Face.png">
		<img src="Card prompt.png">
		<img src="3 cards.png">
		<h1 id="caption">show card to reader and interpretation will appear here</h1>
		<img id="scanning" src="Eye.gif">
		<div>
			<a-scene embedded
				mindar-image="filterMinCF:0.1; filterBeta: 10; imageTargetSrc: targets.mind; uiScanning: #scanning"
				vr-mode-ui="enabled: false"
				device-orientation-permission-ui="enabled: false"
				color-space="sRGB"
				renderer="colorManagement: true, physicallyCorrectLights"
			>
      		<a-camera position="0 0 0" look-controls="enabled:true"></a-camera>
			<a-entity id="back" mindar-image-target="targetIndex: 0"></a-entity>
			<a-entity id="theEmpress" mindar-image-target="targetIndex: 1"></a-entity>
			<a-entity id="sevenOfCups" mindar-image-target="targetIndex: 2"></a-entity>
			<a-entity id="sixOfPentacles" mindar-image-target="targetIndex: 3"></a-entity>
    </a-scene>
	</div>
	</body>
</html>